\
.\" This man page was generated by the Netpbm tool 'makeman' from HTML source.
.\" Do not hand-hack it!  If you have bug fixes or improvements, please find
.\" the corresponding HTML page on the Netpbm website, generate a patch
.\" against that, and send it to the Netpbm maintainer.
.TH "Netpbm subroutine library: pm_make_tmpfile() function" 3 "10 November 2007" "netpbm documentation"

 
.SH NAME

pm_make_tmpfile() - create a temporary named file

.SH SYNOPSIS

.nf
#include <netpbm/pm.h>

pm_make_tmpfile(FILE **       fileP,
                const char ** filenameP);
.fi

.SH EXAMPLE
.PP
This simple example creates a temporary file, writes "hello
world" to it, then writes some search patterns to it, then uses
it as input to \fBgrep\fP:

.nf
#include <netpbm/pm.h>

FILE * myfileP;
const char * myfilename;

pm_make_tmpfile(&myfileP, &myfilename);

fprintf(myfile, "^account:\e\es.*\en");
fprintf(myfile, "^name:\e\es.*\en");

fclose(myFileP);

asprintfN(&grepCommand, "grep --file='%s' /tmp/infile >/tmp/outfile");

system(grepCommand);

strfree(grepCommand);

unlink(myfilename);

strfree(myfilename);

.fi

.SH DESCRIPTION
.PP
This library function is part of
.BR "Netpbm" (1)\c
\&.
.PP
\fBpm_make_tmpfile()\fP creates and opens a temporary file, returning
to you a stream file handle for it and its name.

\fBpm_make_tmpfile()\fP chooses a file name that is not already in use,
with proper interlocking to make sure that it actually creates a file
and opens the new file, as opposed to merely opening an existing file.
.PP
If you don't need to access the file by name, use
\fBpm_tmpfile()\fP instead, because it's cleaner.  With
\fBpm_tmpfile()\fP, the operating system always deletes the temporary
file when your program exits, if the program failed to clean up after
itself.
.PP
The temporary file goes in the directory named by the
\fBTMPFILE\fP environment variable.  If \fBTMPFILE\fP is not set or
is set to something unusable (e.g.  too long), \fBpm_tmpfile()\fP
falls back to the value of the standard C library symbol
\fBP_tmpdir\fP (like the standard C library's \fBtmpfile()\fP).
.PP
The name of the file within that directory is like
\fBmyprog_blrfx\fP, where \fBmyprog\fP is the name of your program
(arg 0) and the rest is an arbitrary discriminator.
.PP
If \fBpm_make_tmpfile()\fP is unable to create a temporary file,
it issues a message to Standard Error and aborts the program.


.SH HISTORY
.PP
\fBpm_tmpfile()\fP was introduced in Netpbm 10.27 (March 2005).
.SH DOCUMENT SOURCE
This manual page was generated by the Netpbm tool 'makeman' from HTML
source.  The master documentation is at
.IP
.B http://netpbm.sourceforge.net/doc/libmaketmpfile.html
.PP