\
.\" This man page was generated by the Netpbm tool 'makeman' from HTML source.
.\" Do not hand-hack it!  If you have bug fixes or improvements, please find
.\" the corresponding HTML page on the Netpbm website, generate a patch
.\" against that, and send it to the Netpbm maintainer.
.TH "Windows Icons" 1 "12 April 2013" "netpbm documentation"

.UN name
.SH NAME

Microsoft Windows icon files

.UN description
.SH DESCRIPTION
.PP
A Microsoft Windows icon file contains one or more images, at
resolutions up to 256 by 256 pixels and various bpp values.  The
images are encoded either as Portable Network Graphics file (PNG), or
in a format similar to Microsoft's BMP format.
.PP
If encoded as BMP, the image includes an "AND mask",
which contains 1-bit transparency data.  It may also contain
additional 8-bit transparency data together with the color
information.


.UN colordepth
.SS Color Depth

Except for the 16 bits per pixel images and images with bit fields, which both
are rare, the colors in all BMP encoded images are RGB with 8 bits per
channel.  Images with bpp values lower than 16 use a palette.
.PP
I.e. the bpp value gives the number of distinct colors, not the color
depth.


.UN masks
.SS XOR Mask and AND Mask
.PP
BMP encoded images contain two pixel maps: The so-called "XOR
mask" stores the color information for each pixel, and the
"AND mask" stores the transparency belonging to it.
.PP
The names and the function of these maps are most easily
understood by looking at how a 1-bpp icon image is rendered on a
monochrome screen: The pixels on the screen are logically AND-ed with
the bits on the AND mask, then the result is logically XOR-ed with the
bits on the XOR mask.
.PP
The result is that if a bit on the AND mask is reset, the corresponding bit
on the XOR mask determines the color of the pixel on the screen.  If a bit in
the AND mask is set and the corresponding bit in the XOR mask is black
(reset), the image is transparent.  Finally, if the bits are set in both the
AND and XOR mask (the pixel on the XOR mask is white), the background of the
screen is inverted.
.PP
In color environments, a pixel on the XOR mask outside the opaque area of
the image is usually black and sometimes white, but a color other than black
and white will hardly give predictable results.
.PP
Since Windows XP, there may also be an 8-bit transparency channel in 32-bpp
BMP encoded icon images. The AND mask, however, is still required and used
e.g. for generating shadows.
.PP
PNG encoded images don't contain AND masks.  While rendering a PNG encoded
image, Windows constructs an AND mask on the fly from the transparency
channel, if present.


.UN evolution
.SS Evolution of Windows Icons
.PP
The Windows icon file format has undergone some extensions since it was
invented in the mid-eighties for Windows\ 1:


.IP \(bu
Windows\ 1 used monochrome 32x32 icons only.
.IP \(bu
Windows\ 3.0 added color icons with bpp values up to 8.
.IP \(bu
Windows 4.0 (a.k.a. Windows95) added support for 32-bpp images and
resolutions up to 256 by 256.
.IP \(bu
NT\ 5.1 (a.k.a. Windows\ XP) added support for the 8-bit
transparency channel in the unused bits of 32-bpp images.
.IP \(bu
NT\ 6.0 (a.k.a. Windows\ Vista) added support for PNG
encoded images


.UN resolutions
.SS Common Resolutions and BPP Values
.PP
Typical resolutions and bpp values of the Windows shell icons include:

.TS
l l l.
_
OS	resolutions	bpp values
Windows\ 3	32x32	1, 4

Windows\ 4	16x16, 32x32, 48x48	4, 8
NT\ 5	16x16, 32x32, 48x48	4, 8, 32
<TD rowspan=3>NT\ 6	16x16, 32x32, 48x48	4, 8, 32
24x24, 96x96	8, 32

256x256	32 (PNG encoded)

.TE
.PP
Within the icon file, the images with low bpp values are usually
stored first.  With the same bpp value, the images are sorted by
resolution, large images first.


.UN mimetype
.SS MIME Type and File Name Extension
.PP
The MIME type of Windows icon files is registered by IANA as
\fBimage/vnd.microsoft.icon\fP, but the unofficial name
\fBimage/x-icon\fP is still widely used.
.PP
The file name extension (used by Microsoft operating systems as
file type identifier) is \fB.ico\fP.
.SH DOCUMENT SOURCE
This manual page was generated by the Netpbm tool 'makeman' from HTML
source.  The master documentation is at
.IP
.B http://netpbm.sourceforge.net/doc/winicon.html
.PP